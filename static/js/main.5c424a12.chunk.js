(this.webpackJsonpbibliotek=this.webpackJsonpbibliotek||[]).push([[0],{48:function(e,t,c){},58:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(26),o=c.n(r),s=(c(48),c(7)),i=c(19),l=c(2),j=function(){return Object(l.jsxs)("div",{className:"navbar",children:[Object(l.jsx)(i.b,{to:"/",children:Object(l.jsx)("h1",{children:"Lyngby Biblotik"})}),Object(l.jsxs)("div",{className:"links",children:[Object(l.jsx)(i.b,{to:"/",children:"Home"}),Object(l.jsx)(i.b,{to:"/addbook",children:"Add Book"})]})]})},d=c(20),b=c(29);c(60),c(55),c(59);b.a.initializeApp({apiKey:"AIzaSyDqpox1kagK_YrIqw5zeIlhjPeHEegv-4A",authDomain:"real-men-school.firebaseapp.com",projectId:"real-men-school",storageBucket:"real-men-school.appspot.com",messagingSenderId:"883612867376",appId:"1:883612867376:web:f567f67c2ce035b00346f5"});var u=b.a.firestore(),h=(b.a.auth(),b.a.storage()),O=b.a.firestore.FieldValue.serverTimestamp,g=function(e){var t=Object(a.useState)(null),c=Object(s.a)(t,2),n=c[0],r=c[1],o=Object(a.useState)(!0),i=Object(s.a)(o,2),l=i[0],j=i[1],b=Object(a.useState)(null),h=Object(s.a)(b,2),O=h[0],g=h[1];return Object(a.useEffect)((function(){var t=u.collection(e),c=new AbortController;return t.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(d.a)(Object(d.a)({},e.data()),{},{id:e.id}))})),j(!1),r(t),g(null)}),(function(e){console.log(e),"AbortError"===e.name?console.log("fetch aborted"):(j(!1),g(e.message))})),function(){return c.abort()}}),[e]),{data:n,isPending:l,error:O}},p=c(78),x=c(82),m=c(81),f=c(84),v=c(83),y=function(e){var t=e.book,c=Object(p.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2)},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}))();return Object(l.jsx)(m.a,{className:c.paper,children:Object(l.jsx)(x.a,{container:!0,spacing:2,children:Object(l.jsxs)(x.a,{item:!0,xs:12,sm:!0,container:!0,children:[Object(l.jsx)(x.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:Object(l.jsxs)(x.a,{item:!0,xs:!0,children:[Object(l.jsx)(f.a,{gutterBottom:!0,variant:"subtitle1",children:t.title}),Object(l.jsx)(f.a,{variant:"body2",gutterBottom:!0,children:t.detail}),Object(l.jsx)(f.a,{gutterBottom:!0,children:t.categroy})]})}),Object(l.jsx)(x.a,{item:!0,children:Object(l.jsx)(v.a,{className:c.image,children:Object(l.jsx)("img",{className:c.img,alt:t.img,src:t.img})})})]})})})},k=function(e){var t=e.categroys,c=e.onShow;return Object(l.jsx)("aside",{className:"column-leftbar",children:Object(l.jsxs)("div",{className:"pane-content",children:[Object(l.jsx)("h2",{children:"Kategorier"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{value:"all",onClick:c,children:"All"}),t.map((function(e,t){return Object(l.jsx)("li",{value:e,onClick:c,children:e},t)}))]})]})})},N=function(e){var t=Object(a.useState)(e.books),c=Object(s.a)(t,2),n=c[0],r=c[1];return Object(l.jsxs)("div",{className:"layout-wrapper row",children:[Object(l.jsx)(k,{categroys:e.categroys,onShow:function(t){var c=e.books,a=t.target.innerHTML;if(r(c),"All"!==a){var n=c.filter((function(e){return e.categroy===a}));r(n)}}}),Object(l.jsxs)("div",{className:"column",children:[Object(l.jsx)("h2",{children:"Litteratur"}),n.map((function(e){return Object(l.jsx)("div",{className:"book",children:Object(l.jsx)(i.b,{to:"/book/".concat(e.id),children:Object(l.jsx)(y,{book:e})})},e.id)}))]})]})},w=function(e){var t=g("book"),c=t.data,a=t.isPending,n=t.error;return a?Object(l.jsx)("div",{children:"Loading...."}):Object(l.jsxs)("div",{children:["add"===e.message&&Object(l.jsx)("h3",{className:"book-headline",children:" New Book releases "}),"edit"===e.message&&Object(l.jsx)("h3",{className:"book-headline",children:" Edit Book"}),Object(l.jsx)("h1",{className:"book-headline",children:"E-b\xf8ger"}),n&&Object(l.jsx)("div",{children:n}),c&&Object(l.jsx)(N,{books:c,categroys:e.categroys})]})},S=function(){return Object(l.jsxs)("div",{className:"not-found",children:[Object(l.jsx)("h1",{children:"Wrong site"}),Object(l.jsx)("p",{children:"That page cannot be found"}),Object(l.jsx)(i.b,{to:"/",children:"Back to the homepage..."})]})},C=c(13),A=c.n(C),B=c(24),I=c(27),E=function(e,t){var c=Object(a.useState)(null),n=Object(s.a)(c,2),r=n[0],o=n[1],i=Object(a.useState)(null),l=Object(s.a)(i,2),j=l[0],d=l[1];return{error:r,deleteDoc:function(){var c=u.collection(e).doc(t);try{return c.delete()}catch(a){o(a.message)}},update:function(){var t=Object(B.a)(A.a.mark((function t(c,a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(a),d(!0);try{u.collection(e).doc(c).update(a)}catch(n){o(n.message)}finally{d(!1)}case 3:case"end":return t.stop()}}),t)})));return function(e,c){return t.apply(this,arguments)}}(),add:function(){var t=Object(B.a)(A.a.mark((function t(c){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d(!0);try{u.collection(e).add(c)}catch(a){o(a.message)}finally{d(!1)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),loading:j}},D=c(8),M=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),o=Object(s.a)(r,2),i=o[0],l=o[1],j=Object(a.useState)(null),d=Object(s.a)(j,2),b=d[0],u=d[1];return{uploadImage:function(){var e=Object(B.a)(A.a.mark((function e(t){var c,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=h.ref("images/").child(t.name),u(!0),e.prev=2,e.next=5,c.put(t);case 5:a=e.sent,console.log(a),a.ref.getDownloadURL().then((function(e){l(e),console.log(e)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.message),n(e.t0);case 14:return e.prev=14,u(!1),console.log("why",i),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[2,10,14,18]])})));return function(t){return e.apply(this,arguments)}}(),url:i,error:c,loadingUpload:b}},L=function(e){var t=Object(a.useState)({author:"",categroy:"fantasy",detail:"",title:"",img:""}),c=Object(s.a)(t,2),n=c[0],r=c[1],o=Object(D.f)(),i=E("book"),j=i.add,b=i.loading,u=M("book"),h=u.url,g=u.uploadImage,p=u.loadingUpload,x=Object(a.useState)(null),m=Object(s.a)(x,2),f=m[0],v=m[1],y=["image/png","image/jpeg"],k=Object(a.useState)(null),N=Object(s.a)(k,2),w=N[0],S=N[1],C=Object(a.useState)(null),L=Object(s.a)(C,2),T=L[0],H=L[1];function W(e){var t=e.target,c=t.name,a=t.value;r((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(I.a)({},c,a))}))}var z=function(){var e=Object(B.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(f),!f){e.next=6;break}return e.next=5,g(f);case 5:H("du har add et nyt billede");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"book-headline",children:"Add Book"}),Object(l.jsx)("div",{className:"addbook",children:Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.log(h),j({author:n.author,categroy:n.categroy,detail:n.detail,title:n.title,img:h||"https://static.thenounproject.com/png/2451944-200.png",createdAt:O()}),r({author:"",categroy:"fantasy",detail:"",title:"",img:"https://static.thenounproject.com/png/2451944-200.png"}),e.setMessage("add"),o.push("/")},children:[Object(l.jsxs)("div",{className:"addbook-upload",children:["Img: ",Object(l.jsx)("input",{name:"img",type:"file",onChange:function(e){var t=e.target.files[0];console.log(t),t&&y.includes(t.type)?(v(t),S(null)):(v(null),S("please select an image file(png or jpg)"))}}),Object(l.jsx)("button",{className:"btn btn-secondary",onClick:function(e){z(e)},children:" upload "})]}),T&&Object(l.jsx)("div",{children:T}),Object(l.jsxs)("div",{className:"addbook-form",children:["Title: ",Object(l.jsx)("input",{type:"text",value:n.title,name:"title",onChange:W}),"Info: ",Object(l.jsx)("textarea",{type:"text",rows:"4",value:n.detail,name:"detail",onChange:W}),"Categroy: ",Object(l.jsx)("select",{name:"categroy",value:n.categroy,onChange:W,children:e.categroys.map((function(e,t){return Object(l.jsx)("option",{name:e,children:e},t)}))}),"Author:  ",Object(l.jsx)("input",{type:"text",value:n.author,name:"author",onChange:W}),!b&&Object(l.jsx)("button",{className:"btn btn-secondary",children:" add "}),b&&Object(l.jsx)("button",{disabled:!0,children:"Adding Book...."}),w&&Object(l.jsx)("div",{children:w}),p&&Object(l.jsx)("div",{children:"Waiting for photo"})]})]})})]})},T=function(e,t){var c=Object(a.useState)(null),n=Object(s.a)(c,2),r=n[0],o=n[1],i=Object(a.useState)(null),l=Object(s.a)(i,2),j=l[0],b=l[1];return Object(a.useEffect)((function(){function c(){return(c=Object(B.a)(A.a.mark((function c(){var a;return A.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,u.collection(e).doc(t).get();case 3:a=c.sent,o(Object(d.a)(Object(d.a)({},a.data()),{},{id:a.id})),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),b(c.t0.message);case 10:case"end":return c.stop()}}),c,null,[[0,7]])})))).apply(this,arguments)}!function(){c.apply(this,arguments)}()}),[e,t]),{item:r,error:j}},H=function(e){var t=Object(D.f)(),c=e.book,n=Object(a.useState)(c),r=Object(s.a)(n,2),o=r[0],i=r[1],j=function(e){var t=e.target,c=t.name,a=t.value;i((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(I.a)({},c,a))}))};return Object(l.jsx)("div",{className:"editbook",children:Object(l.jsxs)("form",{onSubmit:function(c){c.preventDefault(),e.update(o.id,o),e.setMessage("edit"),t.push("/")},children:["Title: ",Object(l.jsx)("input",{type:"text",value:o.title,name:"title",onChange:j}),"Info: ",Object(l.jsx)("textarea",{type:"text",rows:"4",value:o.detail,name:"detail",onChange:j}),"Categroy: ",Object(l.jsx)("select",{name:"categroy",value:o.categroy,onChange:j,children:e.categroys.map((function(e,t){return Object(l.jsx)("option",{name:e,children:e},t)}))}),"Author:  ",Object(l.jsx)("input",{type:"text",value:o.author,name:"author",onChange:j}),Object(l.jsx)("button",{children:"Edit"})]})})},W=function(e){var t=Object(D.g)().id,c=T("book",t),n=c.item,r=c.error,o=E("book",t),i=o.deleteDoc,j=o.update,d=Object(a.useState)(!1),b=Object(s.a)(d,2),u=b[0],h=b[1],O=Object(D.f)(),g=function(e){"delete"===e?t&&(i(t),O.push("/")):"edit"===e&&h(!u)};return Object(l.jsxs)("div",{className:"book-details",children:[r&&Object(l.jsx)("div",{children:r}),n&&Object(l.jsxs)("article",{children:[Object(l.jsx)("img",{src:n.img,className:"img",alt:"books"}),Object(l.jsxs)("div",{className:"book-details-text",children:[Object(l.jsx)("h2",{children:n.title}),Object(l.jsx)("h3",{children:"info"}),Object(l.jsx)("p",{children:n.detail}),Object(l.jsx)("h3",{children:"Written by "}),Object(l.jsx)("p",{children:n.author}),Object(l.jsx)("h3",{children:"Categroy "}),Object(l.jsx)("p",{children:n.categroy})]}),Object(l.jsx)("button",{onClick:function(){return g("edit")},children:"Charge"}),Object(l.jsx)("button",{onClick:function(){return g("delete")},children:"Delete"}),u&&Object(l.jsx)(H,{book:n,update:j,id:t,categroys:e.categroys,setMessage:e.setMessage})]}),r&&Object(l.jsx)("div",{children:"Error..."})]})};var z=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),c=t[0],n=t[1],r=["fantasy","roman","erindringer","udlandet","drama"];return Object(l.jsx)(i.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(j,{}),Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(D.c,{children:[Object(l.jsx)(D.a,{exact:!0,path:"/",children:Object(l.jsx)(w,{categroys:r,message:c})}),Object(l.jsx)(D.a,{path:"/addbook",children:Object(l.jsx)(L,{setMessage:n,categroys:r})}),Object(l.jsx)(D.a,{path:"/book/:id",children:Object(l.jsx)(W,{categroys:r,setMessage:n})}),Object(l.jsx)(D.a,{path:"*",children:Object(l.jsx)(S,{})})]})})]})})};o.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(z,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.5c424a12.chunk.js.map